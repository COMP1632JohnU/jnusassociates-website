<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />

  <title>JNUS Associates Ltd | AI • Systems • Tech • Business & Data Analytics</title>

  <!-- Styles and Scripts -->
  <link rel="stylesheet" href="styles.css" />
  <script src="https://unpkg.com/lucide@latest" defer></script>
  <script src="script.js" defer></script>

  <style>
    /* ===== Podcast Section (Glass Aesthetic) ===== */
    .podcast-section {
      text-align: center;
      margin: 120px auto;
      padding: 60px 30px;
      max-width: 1200px;
      background: rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(0,255,255,0.25);
      border-radius: 16px;
      box-shadow: 0 0 25px rgba(0,255,255,0.15);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: #e0f7f7;
      animation: fadeUp 1.2s ease-out forwards;
    }

    .podcast-section h2 {
      color: #00f5d4;
      text-shadow: 0 0 10px rgba(0,255,255,0.6);
      font-size: 1.8rem;
      margin-bottom: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }

    .podcast-intro {
      max-width: 800px;
      margin: 0 auto 40px;
      color: #c0f8f8;
      font-size: 1.1rem;
      line-height: 1.7;
    }

    .podcast-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(330px, 1fr));
      gap: 30px;
      justify-content: center;
    }

    .podcast-card {
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(0,255,255,0.25);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(0,255,255,0.1);
      transition: all 0.3s ease, opacity 0.6s ease;
      opacity: 0;
      transform: translateY(20px);
    }
    .podcast-card.visible { opacity: 1; transform: translateY(0); }

    .podcast-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 0 30px rgba(0,255,255,0.4);
    }

    .podcast-card iframe {
      width: 100%;
      height: 200px;
    }

    .podcast-card h3 {
      color: #00f5d4;
      font-size: 1.1rem;
      margin: 12px 0 18px 0;
      text-shadow: 0 0 8px rgba(0,255,255,0.5);
    }

    /* ===== Timestamp, Spinner, and Caption ===== */
    .last-updated {
      margin-top: 25px;
      font-size: 0.9rem;
      color: #89f;
      text-shadow: 0 0 8px rgba(0,255,255,0.3);
      font-family: "Courier New", monospace;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      opacity: 0;
      transition: opacity 0.6s ease;
    }
    .last-updated.visible { opacity: 1; }

    .spinner {
      display: inline-flex;
      width: 18px;
      height: 18px;
      opacity: 0;
      transition: opacity 0.25s ease;
    }
    .spinner.active {
      opacity: 1;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .update-caption {
      font-size: 0.8rem;
      color: #77baff;
      opacity: 0.75;
      margin-top: 4px;
      font-family: "Courier New", monospace;
    }

    @keyframes fadeUp {
      from {opacity: 0; transform: translateY(25px);}
      to {opacity: 1; transform: translateY(0);}
    }
  </style>
</head>

<body style="background-image:url('gracechurch.jpg');background-size:cover;background-position:center;">
  <!-- ===== HEADER ===== -->
  <header class="site-header" style="position: relative; background: rgba(0,0,0,0.65); padding: 20px 0;">
    <div class="container glass-box">
      <div class="brand">
        <img src="jnus-logo.png" alt="JNUS Associates Logo" class="logo" />
        <div class="brand-text">
          <h1 class="glow">JNUS Associates Ltd</h1>
          <p class="glow-tagline">AI • Systems • Tech • Business & Data Analytics</p>
          <p class="glow">
            📞 020 3538 4966
            <a href="https://wa.me/442035384966" target="_blank" class="whatsapp-icon" title="Chat on WhatsApp">
              <i data-lucide="whatsapp"></i>
            </a>
          </p>
        </div>
      </div>

      <nav class="navbar">
        <ul>
          <li><a href="/" class="active">Home</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="/services/">Services</a></li>
          <li><a href="/projects/">Projects</a></li>
          <li><a href="/contact/">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <main class="hero">
    <h2>Delivering clarity and confidence in deep learning, software, tech, and quantum data analytics.</h2>
    <p>At JNUS Associates, we provide solutions that empower your business through innovation, precision, and engineering excellence.</p>
    <button onclick="window.location.href='/contact/'">Contact Us</button>
  </main>

  <!-- ===== FINANCIAL PODCASTS SECTION ===== -->
  <section class="podcast-section">
    <h2><i data-lucide="radio"></i> Financial Insights & Podcasts</h2>
    <p class="podcast-intro">
      Stay informed with the latest market analysis, fintech innovations, insurance and reinsurance trends, MGAs, and business strategy discussions curated for modern enterprises.
    </p>

    <div class="podcast-grid" id="youtubeFeed">
      <p style="color:#88f; text-align:center;">Loading latest videos...</p>
    </div>

    <p class="last-updated" id="lastUpdated">
      <span id="updatedText">Last updated: Initializing...</span>
      <span class="spinner" id="fetchSpinner" aria-hidden="true"><i data-lucide="loader-2"></i></span>
    </p>
    <p class="update-caption">(auto-updating every 4 hours)</p>
  </section>

  <!-- ===== FOOTER ===== -->
  <footer>
    <p>© 2025 JNUS Associates Ltd. All rights reserved.</p>
    <p>
      📞 020 3538 4966
      <a href="https://wa.me/442035384966" target="_blank" class="whatsapp-icon" title="Chat on WhatsApp">
        <i data-lucide="whatsapp"></i>
      </a>
      |
      <a href="mailto:juzoukwu@jnusassociates.com">juzoukwu@jnusassociates.com</a>
    </p>
    <p>VAT No. GB303748316 | Company Reg No. 11463053</p>
  </footer>

  <!-- ===== MARKET STATUS + CLOCK + TICKER ===== -->
  <div id="marketStatusBar" class="market-status-bar"><span class="neutral-glow">Checking global market status...</span></div>
  <div id="marketClockBar" class="market-clock-bar"><span class="neutral-glow">Loading clocks...</span></div>
  <div class="stock-ticker"><div class="ticker-content" id="stockTicker">Loading live market data...</div></div>

  <!-- ===== LUCIDE ICON INIT SCRIPT + AUTO REFRESH ===== -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // === Initialize Lucide Icons ===
      function initLucide() {
        if (window.lucide) lucide.createIcons();
        else setTimeout(initLucide, 150);
      }
      initLucide();

      const API_KEY = "AIzaSyAoV-sJksBEsJFILjbT_5DzqmmjGHr6ErM";
      const CHANNEL_ID = "YOUR_CHANNEL_ID_HERE"; // 🔹 Replace once ready

      const videoContainer = document.getElementById("youtubeFeed");
      const lastUpdated = document.getElementById("lastUpdated");
      const updatedText = document.getElementById("updatedText");
      const spinner = document.getElementById("fetchSpinner");

      let lastUpdateTime = null;

      function updateTimestamp() {
        if (!lastUpdateTime) return;
        const now = new Date();
        const diffMs = now - lastUpdateTime;
        const diffMins = Math.floor(diffMs / 60000);
        const hours = Math.floor(diffMins / 60);
        const minutes = diffMins % 60;

        const agoText =
          diffMins < 1 ? "(just now)" :
          hours > 0 ? `(${hours}h ${minutes}m ago)` :
          `(${minutes}m ago)`;

        const timeString = lastUpdateTime.toLocaleTimeString("en-GB", { hour: "2-digit", minute: "2-digit" });
        const dateString = lastUpdateTime.toLocaleDateString("en-GB", { day: "2-digit", month: "short", year: "numeric" });

        updatedText.textContent = `Last updated: ${dateString}, ${timeString} ${agoText}`;
        lastUpdated.classList.add("visible");
      }

      async function fetchYouTubeVideos() {
        try {
          // Show spinner + status
          spinner.classList.add("active");
          updatedText.textContent = "Refreshing…";
          lastUpdated.classList.add("visible");

          // If channel not set yet, fail gracefully
          if (!CHANNEL_ID || CHANNEL_ID === "YOUR_CHANNEL_ID_HERE") {
            throw new Error("Channel ID not set yet.");
          }

          const url = `https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${CHANNEL_ID}&part=snippet,id&order=date&maxResults=3`;
          const response = await fetch(url);
          const data = await response.json();

          if (!data.items) throw new Error("No items returned.");

          videoContainer.innerHTML = "";
          let added = 0;

          data.items.forEach((item, index) => {
            if (item.id && item.id.kind === "youtube#video") {
              const videoId = item.id.videoId;
              const title = item.snippet.title;
              const card = document.createElement("div");
              card.classList.add("podcast-card");
              card.innerHTML = `
                <iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>
                <h3>${title}</h3>
              `;
              videoContainer.appendChild(card);
              setTimeout(() => card.classList.add("visible"), index * 200);
              added++;
            }
          });

          if (added === 0) {
            videoContainer.innerHTML = "<p style='color:#8af;'>No public videos found for this channel yet.</p>";
          }

          lastUpdateTime = new Date();
          updateTimestamp();
        } catch (error) {
          videoContainer.innerHTML = "<p style='color:#f88;'>Unable to load podcasts at this time. Please check your API key or channel ID.</p>";
          updatedText.textContent = "Last updated: Error fetching data";
          lastUpdated.classList.add("visible");
        } finally {
          spinner.classList.remove("active");
          // Re-render lucide in case icon mounts late
          try { if (window.lucide) lucide.createIcons(); } catch(e){}
        }
      }

      // Initial fetch + schedules
      fetchYouTubeVideos();

      const FOUR_HOURS = 4 * 60 * 60 * 1000;
      setInterval(fetchYouTubeVideos, FOUR_HOURS);  // Auto-refresh every 4 hours
      setInterval(updateTimestamp, 60 * 1000);      // Refresh “x minutes ago” every minute
    });
  </script>
</body>
</html>